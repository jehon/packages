#!/usr/bin/env bash

. jh-lib

# https://doc.ubuntu-fr.org/smbnetfs
# smbnetfs
# smbnetfs network
# cd $JH_NETWORK/papa:rsip23ingi@192.168.1.9
# mount | grep $HOME/network
# fusermount -u network

JH_NETWORK=~/network

if [ -n "$1" ]; then
    fusermount -u "$JH_NETWORK"
    ok "Unmounted from $JH_NETWORK"
    exit 0
fi

if ! mount | grep "$JH_NETWORK" >/dev/null; then
    header "Mounting to $JH_NETWORK..."
    mkdir -p "$JH_NETWORK"
    smbnetfs "$JH_NETWORK"
    ok "Mounted at $JH_NETWORK"
else
    ok "Already mounted at $JH_NETWORK"
fi

JH_NETWORK_NAS="$JH_NETWORK/$JH_NAS_USER:$JH_NAS_PASS@$JH_NAS_IP"
JH_NETWORK_NAS_ADMIN="$JH_NETWORK/$JH_NAS_ADMIN_USER:$JH_NAS_ADMIN_PASS@$JH_NAS_IP"

export JH_NETWORK
export JH_NETWORK_NAS
export JH_NETWORK_NAS_ADMIN
